# AWS サービス名タイピングゲーム

Pygame を使用した AWS サービス名のタイピングゲームです。

## 概要

このゲームは AWS のサービス名を含むポジティブでユーモアのある英語文をタイピングする練習ができるゲームです。
制限時間内にできるだけ正確に、速くタイプして高いスコアを目指しましょう。
80種類以上の AWS サービスが出題されます。

## 主な特徴

- **新スコアシステム**: スコア = 正答率 × WPM（1分あたりの単語数）
- **1文字ごとの正誤判定**: 間違った文字は入力されず、リアルタイムでフィードバック
- **自動進行**: 文章を正しく入力完了すると自動的に次の問題へ
- **ポジティブな内容**: すべての文章が前向きで楽しい内容に
- **日本語対応**: すべての文章に日本語訳付き
- **アクセシビリティ**: 色覚サポート、ハイコントラストモード搭載

## 必要条件

- Python 3.x
- uv (推奨) または pip

## インストール方法

### uv を使用する場合（推奨）

1. uv のインストール（まだインストールしていない場合）:

```bash
# macOS / Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

2. パッケージのインストール:

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/q_dev_cli_game.git
cd q_dev_cli_game

# 開発モードでインストール
uv venv
uv pip install -e .
```

### pip を使用する場合

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/q_dev_cli_game.git
cd q_dev_cli_game

# 仮想環境を作成
python -m venv .venv
source .venv/bin/activate  # macOS/Linux
# .venv\Scripts\activate  # Windows

# 開発モードでインストール
pip install -e .
```

## 実行方法

### 🚀 推奨: uvコマンドを使用

```bash
# ゲームを起動
uv run aws-typing-game

# 開発モードでゲームを起動
uv run python src/aws_typing_game/main.py

# 開発スクリプト経由で起動
uv run scripts/dev.py game
```

### 📋 開発タスクの実行

```bash
# テスト実行
uv run scripts/dev.py test

# コード品質チェック
uv run scripts/dev.py lint

# コードフォーマット
uv run scripts/dev.py format

# 全品質チェック（フォーマット + リント + テスト）
uv run scripts/dev.py check
```

### 🛠️ Just taskrunner（オプション）

Justがインストールされている場合：

```bash
# ゲーム起動
just game

# テスト実行
just test

# 全チェック
just check

# コマンド一覧表示
just
```

## 操作方法

### メニュー画面
- **スペースキー**: ゲーム開始
- **効果音ボタン/F3キー**: 効果音のON/OFF切り替え
- **BGMボタン/F4キー**: BGMのON/OFF切り替え
- **ESCキー**: ゲーム終了

### ゲーム中
- **文字入力**: 表示された文章を正確にタイプ（間違った文字は入力されません）
- **バックスペース**: 文字を削除
- **ESCキー**: メニューに戻る

### 結果画面
- **スペースキー**: 再挑戦
- **Iキー**: サービス情報を表示（回答したサービスがある場合）
- **ESCキー**: メニューに戻る

### サービス情報画面
- **Aキー**: 前のサービス
- **Dキー**: 次のサービス
- **ESCキー**: 結果画面に戻る

### ファンクションキー（いつでも使用可能）
- **F1**: 色覚サポートモード切り替え（通常→赤色盲→緑色盲→青黄色盲）
- **F2**: ハイコントラストモード ON/OFF
- **F3**: 効果音 ON/OFF（デフォルトOFF）
- **F4**: BGM ON/OFF（デフォルトOFF）

## ゲームルール

1. 60秒の制限時間内にできるだけ多くの文章を正確にタイプ
2. 1文字ごとに正誤判定され、正しい文字のみ入力される
3. 文章を最後まで正しく入力すると自動的に次の問題へ
4. スコアは「正答率 × WPM」で計算
   - 正答率 = (1 - ミスタイプ数 / 総入力試行数) × 100%
   - WPM = 1分あたりの単語数（5文字 = 1単語として計算）

## 評価システム

スコア（正答率 × WPM）に応じて以下の評価が表示されます：

- **Hero** (金色): 80以上 - 完璧な正確性と非常に速いタイピング
- **Specialty** (紫色): 60〜79 - 上級者レベル
- **Professional** (エメラルド色): 45〜59 - 中級者レベル
- **Associate** (青色): 30〜44 - 初級者レベル
- **Foundational** (灰色): 0〜29 - 基礎レベル

## データ保存

- ハイスコアのみが `save_data.json` に保存されます
- プレイ履歴は保存されません（プライバシー保護のため）

## トラブルシューティング

### 日本語が文字化けする場合
ゲームは自動的にシステムの日本語フォントを検出しますが、問題がある場合は以下を確認してください：
- macOS: ヒラギノ角ゴシックがインストールされているか
- Windows: メイリオまたはMSゴシックがインストールされているか
- Linux: Noto Sans CJKがインストールされているか

### 音が出ない場合
- F3キーで効果音がONになっているか確認
- F4キーでBGMがONになっているか確認
- システムの音量設定を確認

### BGMを追加したい場合
1. ゲームを一度起動して`music/`フォルダを作成
2. `music/`フォルダにWAV、OGG、MP3ファイルを配置
3. ゲームを再起動するとBGMが自動的に再生されます

推奨BGM:
- アンビエント系の穏やかな音楽
- 30-60秒程度のループ可能な楽曲
- 音量変化の少ないインストゥルメンタル
- タイピングの邪魔にならない低音量の楽曲

## ライセンス

このプロジェクトはオープンソースであり、制限なく自由に利用、変更、配布することができます。

商用利用、私的利用、修正、配布のいずれも許可されています。ソースコードの再配布時にも特別な条件はありません。

このソフトウェアは「現状のまま」提供されており、明示または黙示を問わず、いかなる保証もありません。

## 更新履歴

### v2.0 (最新)
- スコアシステムを「正答率 × WPM」方式に変更
- 1文字ごとの正誤判定を実装
- 文章を正しく入力完了すると自動的に次へ進む機能を追加
- すべての文章をポジティブな内容に変更
- Heroランクの基準を80に引き上げ
- データ保存をハイスコアのみに簡略化
- UI表示の改善（結果画面のボタン削除など）

### v1.0
- 初回リリース